{% extends 'base.html' %}

{% block content %}
<h1>Edit Task</h1>

<form method="POST">
    <div class="mb-3">
        <label for="name" class="form-label">Task Name</label>
        <input type="text" id="name" name="name" class="form-control" value="{{ task.name }}" required>
    </div>
    
    <div class="mb-3">
        <label for="assigned_to" class="form-label">Assigned To</label>
        <select id="assigned_to" name="assigned_to" class="form-control" required>
            <option value="">-- Select User --</option>
            {% for user in users %}
            <option value="{{ user.id }}" {% if user.id == task.assigned_to.id %}selected{% endif %}>{{ user.name }} {{ user.surname }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="mb-3">
        <label for="start_date" class="form-label">Start Date</label>
        <input type="date" id="start_date" name="start_date" class="form-control" value="{{ task.start_date }}" required>
    </div>

    <div class="mb-3">
        <label for="duration" class="form-label">Duration (Days)</label>
        <input type="number" id="duration" name="duration" class="form-control" value="{{ task.duration }}" required>
    </div>

    <div class="mb-3">
        <label for="status" class="form-label">Status</label>
        <select id="status" name="status" class="form-control" required>
            <option value="Tamamlanacak" {% if task.status == 'Tamamlanacak' %}selected{% endif %}>Tamamlanacak</option>
            <option value="Devam Ediyor" {% if task.status == 'Devam Ediyor' %}selected{% endif %}>Devam Ediyor</option>
            <option value="Tamamlandı" {% if task.status == 'Tamamlandı' %}selected{% endif %}>Tamamlandı</option>
        </select>
    </div>

    <button type="submit" class="btn btn-primary">Update Task</button>
</form>

<a href="/projects/{{ project_id }}" class="btn btn-secondary">Back to Project</a>
{% endblock %}